{% extends "base.html" %}

{% block title %}{{ m("protests") }}{% endblock %}

{% block content %}
    <form method="get" action="/protests" class="container">

        <input type="text" name="town" placeholder='{{m("town")}}' class="input input-bordered w-full max-w-xs" />

        <input type="date" name="date_from" placeholder='{{m("date_from")}}' class="input input-bordered w-full max-w-xs" />

        <select name="tags" class="select select-bordered w-full max-w-xs">
            <option disabled selected>{{m("tags")}}</option>
            <option>Han Solo</option>
            <option>Greedo</option>
        </select>

        <input type="text" name="created_by" placeholder='{{m("created_by")}}' class="input input-bordered w-full max-w-xs" />

        <button type="submit" class="btn btn-primary">{{m("search")}}</button>
    </form>

    <section class="box-border">
        {% for protest in protests %}
        <aside>
            {% if protest.image_name.is_some() %}
            <img src="/images/{{ protest.image_name.clone().unwrap() }}" alt="{{ protest.title }}" style="width: 100px;">
            {% endif %}
            <h2>
                <a href="/protests/{{ protest.id }}">{{ protest.title }}</a>
            </h2>
            <!-- Fix and use is_some_and(..) -->
            {% if user_id.unwrap_or_default() == protest.user_id %}
            <a href="/protests/{{ protest.id }}/edit">
                <button type="button">{{ m("edit") }}</button>
            </a>
            {% endif %}
            <p>{{ protest.description }}</p>
            <ul>
                {% for tag in protest.tags %}
                <li>{{ tag }}</li>
                {% endfor %}
            </ul>
            <div>
                {{m("date")}}:<strong> {{ protest.date }}</strong><br>
                {{m("time")}}:<strong>{{ protest.time }}</strong><br>
                {{m("location")}}:<strong>{{ protest.town.clone().unwrap_or("".to_string()) }}, {{ protest.region.clone().unwrap_or("".to_string()) }}, {{ protest.location }}</strong>
            </div>
        </aside>
        {% endfor %}
    </section>
{% endblock %}
